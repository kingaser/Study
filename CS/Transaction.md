## Transaction
- 데이터베이스의 상태를 변화시키기 위해 수행하는 작업의 단위
- 게시판에 사용자가 게시글을 작성하고 등록하고 그 후 다시 게시판에 돌아왔을 때 INSERT 문을 사용하여 게시글 데이터를 등록하고, 게시판을 SELECT 문을 사용하여
최신 정보로 유지할 때 INSERT 문과 SELECT 문 둘을 합친 것을 하나의 트랜잭션이라 함

### 트랜잭션의 4가지 특성
1. 원자성(Atomicity)
  - 트랜잭션 내에서 실행한 작업들은 마치 하나의 작업인 것처럼 모두 성공하거나 실패해야 한다
    
2. 일관성(Consistency)
  - 모든 트랜잭션은 일관성 있는 데이터베이스 상태를 유지해야 한다
  - 데이터베이스에서 정한 무결성 제약 조건을 항상 만족해야 함
    
3. 독립성(Isolation)
  - 동시에 실행되는 트랜잭션들이 서로에게 영향을 미치지 않도록 격리하는 것
  - 동시에 같은 데이터를 수정하지 못하도록 해야 함
  - 격리성은 동시성과 관련된 성능 이슈로 인해 트랜잭션 격리수준(Isolation Level)을 선택할 수 있음
    
4. 지속성(Durability)
  - 트랜잭션을 성공적으로 끝내면 그 결과가 항상 기록되어야 한다
  - 중간에 시스템에 문제가 발생해도 데이터베이스 로그 등을 사용해서 성공한 트랜잭션 내용을 복구해야 함

트랜잭션은 원자성, 일관성, 지속성을 보장. 문제는 격리성
트랜잭션 간에 격리성을 완벽히 보장하려면 트랜잭션을 거의 순서대로 실행해야 함
이러헥 하면 동시 처리 성능이 매우 나빠지기 때문에 ANSI 표준은 트랜잭션의 격리 수준을 4단계로 나누어 정의함

### 트랜잭션 격리수준(Isolation Level)
1. 커밋되지 않은 읽기(READ UNCOMMITTED)
  - 가장 낮은 격리 수준
  - 트랜잭션이 완료되지 않은 다른 트랜잭션의 변경 내용도 읽을 수 있음
  - Dirty Read, Non-Repeatable Read, Phantom Read 등의 문제가 발생할 수 있음

2. 커밋된 읽기(READ COMMITTED)
  - 커밋된 데이터만 읽을 수 있음
  - 다른 트랜잭션이 데이터를 수정하면 해당 변경 내용은 현재 트랜잭션에서 읽기 불가능
  - Non-Repeatable Read, Phantom Read 방지 가능
  - Dirty Read 방지 불가능

3. 반복 가능한 읽기(REPEATABLE READ)
  - 같은 쿼리를 반복해서 실행해도 항상 동일한 결과가 나옴
  - 트랜잭션이 진행되는 동안 읽은 데이터는 다른 트랜잭션에서 변경할 수 없음
  - Phantom Read 방지 가능
  - Dirty Read, Non-Repeatable Read 방지 불가능

4. 직렬화 가능(SERIALIZABLE)
  - 가장 높은 격리 수준
  - 트랜잭션이 진행되는 동안 해당 데이터에 대한 잠금을 설정하여 다른 트랜잭션이 해당 데이터를 읽거나 수정하지 못함
  - 모든 문제 방지 가능
  - 성능 저하의 가능성이 큼

일반적으로 많이 사용하는 트랜잭션 격리 수준은 READ COMMITTED

Dirty Read : 하나의 트랜잭션이 아직 커밋되지 않은 다른 트랜잭션의 변경 내용을 읽을 수 있는 현상
Non-Repeatable Read : 하나의 트랜잭션이 동일한 쿼리를 실행해도 결과가 계속해서 변하는 현상
Phantom Read : 하나의 트랜잭션이 동일한 쿼리를 실행해도 결과 집합이 변경되는 현상
